<div class="card">
  @if (spinnerShow) {
    <div class="card-body" [style.height.px]="300">
      <spinner [name]="SpinnersEnum.ProblemsTable" type="ball-clip-rotate-multiple"></spinner>
    </div>
  } @else if (problems.length == 0){
    <div class="card-body" [style.height.px]="300">
      <empty-result imgHeight="150px"></empty-result>
    </div>
  } @else {
    <div class="beautiful-table table-responsive">
      <table class="table table-striped">
        <thead>
        <tr class="bg-gradient-primary">
          <th>
            <table-ordering
              [value]="ordering"
              [justifyContent]="'start'"
              [ordering]="'id'"
              [reverse]="true"
              (change)="changeOrdering($event)">
              <div class="align-middle">
                <i class="mr-50" [data-feather]="'problem' | iconName"></i>
                ID
              </div>
            </table-ordering>
          </th>
          <th>
            <table-ordering
              [value]="ordering"
              [justifyContent]="'start'"
              [ordering]="'title'"
              (change)="changeOrdering($event)">
              <div class="align-middle">
                <i class="mr-50" [data-feather]="'edit-3'"></i>
                {{ 'TITLE' | translate }}
              </div>
            </table-ordering>
          </th>
          <th>
            <i class="mr-50" [data-feather]="'activity'"></i>
            {{ 'TAGS' | translate }}
          </th>
          <th class="text-center">
            <table-ordering
              [value]="ordering"
              [justifyContent]="'center'"
              [ordering]="'difficulty'"
              (change)="changeOrdering($event)">
              <div class="align-middle">
                <i class="mr-50" [data-feather]="'bar-chart'"></i>
                {{ 'DIFFICULTY' | translate }}
              </div>
            </table-ordering>
          </th>
          <th class="text-center">
            <table-ordering
              [value]="ordering"
              [justifyContent]="'center'"
              [ordering]="'rating'"
              (change)="changeOrdering($event)">
              <div class="align-middle">
                <i class="mr-50" [data-feather]="'star'"></i>
                {{ 'RATING' | translate }}
              </div>
            </table-ordering>
          </th>
          <th class="text-center">
            <table-ordering
              [value]="ordering"
              [justifyContent]="'center'"
              [ordering]="'solved'"
              (change)="changeOrdering($event)">
              <div class="align-middle">
                <i class="mr-50" [data-feather]="'attempt' | iconName"></i>
                {{ 'ATTEMPTS' | translate }}
              </div>
            </table-ordering>
          </th>
        </tr>
        </thead>

        <tbody>
          @for (problem of problems; track problem.id){
            <tr [@fadeInOnEnter] [ngClass]="{
          'bg-light-success': problem.userInfo.hasSolved,
          'bg-light-danger': !problem.userInfo.hasSolved && problem.userInfo.hasAttempted
        }">
              <td>
                {{ problem.id }}
              </td>

              <td>
                <a [routerLink]="['problem', problem.id]">
                  <div>
                    {{ problem.title }}
                  </div>

                  <span *ngIf="problem.hasSolution" class="badge mt-50 badge-pill badge-light-success">
                <i [data-feather]="'exists' | iconName" class="text-success" [size]="16"></i>
                    {{ 'Solution' | translate }}
              </span>

                  <span *ngIf="!problem.hasChecker" class="badge mt-50 badge-pill badge-light-danger">
                <i [data-feather]="'not_exists' | iconName" class="text-danger" [size]="16"></i>
                    {{ 'Checker' | translate }}
              </span>

                  <span *ngIf="problem.hidden" class="badge mt-50 badge-pill badge-light-warning">
                <i [data-feather]="'eye-off'" class="text-warning" [size]="16"></i>
                    {{ 'Hidden' | translate }}
              </span>
                </a>
              </td>

              <td>
                <button
                  class="btn btn-primary round btn-sm"
                  *ngFor="let tag of problem.tags"
                  (click)="tagOnClick(tag.id)"
                >
                  <small>
                    {{ tag.name }}
                  </small>
                </button>
              </td>

              <td class="text-center">
            <span class="badge badge-glow badge-{{ problem.difficulty | problemDifficultyColor }}">
              {{ problem.difficultyTitle | translate }}
            </span>
              </td>

              <td class="text-center">
                <div class="likes-count">
                  <i data-feather="thumbs-up"></i>
                  {{ problem.likesCount }}
                </div>
                <div class="dislikes-count">
                  <i data-feather="thumbs-down"></i>
                  {{ problem.dislikesCount }}
                </div>
              </td>

              <td class="text-center">
            <span class="badge badge-light-info text-center">
              <small class="text-success">{{ problem.solved }}</small><small class="text-dark">/</small><small class="text-info">{{ problem.attemptsCount }}</small>
            </span>
              </td>
            </tr>
          }
        </tbody>
        <tfoot>
        <tr>
          <th>
            <i class="mr-50" [data-feather]="'problem' | iconName"></i>
            ID
          </th>
          <th>
            <i class="mr-50" [data-feather]="'edit-3'"></i>
            {{ 'TITLE' | translate }}
          </th>
          <th>
            <i class="mr-50" [data-feather]="'activity'"></i>
            {{ 'TAGS' | translate }}
          </th>
          <th class="text-center">
            <i class="mr-50" [data-feather]="'bar-chart'"></i>
            {{ 'DIFFICULTY' | translate }}
          </th>
          <th class="text-center">
            <i class="mr-50" [data-feather]="'star'"></i>
            {{ 'RATING' | translate }}
          </th>
          <th class="text-center">
            <i class="mr-50" [data-feather]="'attempt' | iconName"></i>
            {{ 'ATTEMPTS' | translate }}
          </th>
        </tr>
        </tfoot>
      </table>
    </div>
  }
</div>
