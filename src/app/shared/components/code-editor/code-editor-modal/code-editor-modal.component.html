<core-sidebar [hideOnEsc]="true" [name]="'codeEditorSidebar'" class="code-editor-sidebar">
  <a
    (click)="toggleSidebar()"
    class="btn-toggle d-flex align-items-center justify-content-center">
    <span [data-feather]="'terminal'"></span>
  </a>

  <div [perfectScrollbar] class="card full-height position-relative">
    <div class="">
      <div class="card-header">
        <div class="card-title">
          {{ 'CODE_EDITOR.EDITOR' | translate }}
        </div>
        <button (click)="toggleSidebar()" aria-label="Close" class="close" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <hr class="mt-0">
      <div class="card-body" [formGroup]="editorForm">
        <div class="row">
          <div class="col-lg-8 col-md-7 col-12">
            <div
              [ngbTooltip]="editorForm.controls.code.errors | errorMessage"
              [style.height.%]="100"
              container="body"
              tooltipClass="tooltip-danger"
            >
              <monaco-editor
                [formControl]="editorForm.controls.code"
                [height]="500">
              </monaco-editor>
            </div>
          </div>

          <div class="col-lg-4 col-md-5 d-none d-md-block">
            <div class="form-group">
            <span class="badge badge-{{ editorForm.get('lang').value }}">
              {{ editorForm.get('lang').value }}
            </span>
            </div>

            <div *ngIf="sampleTests.length > 0" class="mt-1">
              <div class="d-flex justify-content-between">
                <div class="form-group full-width">
                  <label>{{ 'CODE_EDITOR.SAMPLE_TEST' | translate }}: </label>
                  <ng-select
                    (change)="onSampleTestChange()"
                    [clearable]="false"
                    formControlName="testCaseNumber"
                  >
                    <ng-option
                      *ngFor="let sampleTest of sampleTests;index as i"
                      value="{{ i + 1 }}">
                      {{ i + 1 }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
            </div>

            <div *ngIf="!isSelectedLangText()" class="form-group">
              <label>{{ 'CODE_EDITOR.INPUT' | translate }}:</label>
              <textarea
                [ngbTooltip]="editorForm.controls.input.errors | errorMessage"
                class="form-control"
                formControlName="input"
                placeholder=""
                rows="3"
                tooltipClass="tooltip-danger"
              ></textarea>
            </div>

            <div *ngIf="!isSelectedLangText()" class="form-group mt-1">
              <label>{{ 'CODE_EDITOR.OUTPUT' | translate }}:</label>
              <textarea
                class="form-control"
                formControlName="output"
                placeholder=""
                rows="3"
              ></textarea>
            </div>

            <div *ngIf="!isSelectedLangText()" class="form-group mt-1">
              <label>{{ 'CODE_EDITOR.ANSWER' | translate }}:</label>
              <textarea
                class="form-control"
                formControlName="answer"
                placeholder=""
                rows="3"
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <div class="card-footer d-flex justify-content-end">
        <button
          (click)="run()"
          *ngIf="!isSelectedLangText()"
          class="btn btn-glow btn-dark bg-dark mr-50 d-md-block d-none"
          type="button">
          <span *ngIf="isRunning" aria-hidden="true" class="spinner-border spinner-border-sm" role="status"></span>
          <span *ngIf="!isRunning"><i data-feather="terminal"></i></span>
          {{ 'CODE_EDITOR.RUN' | translate }}
        </button>

        <kepcoin-spend-swal
          (success)="answerForInput($event)"
          *ngIf="answerForInputEnabled"
          [customContent]="true"
          [purchaseUrl]="'problems/' + problem.id + '/answer-for-input/'"
          [requestBody]="{input_data: editorForm.get('input').value}"
          [value]="1"
        >
          <button class="btn btn-glow btn-dark bg-dark mr-50 d-md-block d-none" type="button">
        <span
          *ngIf="isAnswerForInput"
          class="spinner-border spinner-border-sm"
          role="status">
        </span>
            <span *ngIf="!isAnswerForInput">
          <i data-feather="check-square"></i>
        </span>
            {{ 'CODE_EDITOR.ANSWER_FOR_INPUT' | translate }}
          </button>
        </kepcoin-spend-swal>

        <button
          (click)="submit()"
          *ngIf="submitUrl"
          [disabled]="!editorForm.valid"
          class="btn btn-glow btn-dark bg-dark"
          type="submit">
          <i data-feather="send"></i>
          {{ 'CODE_EDITOR.SUBMIT' | translate }}
        </button>
      </div>
    </div>
  </div>

</core-sidebar>

<ng-select-css></ng-select-css>
